<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Hamster Tycoon</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #000;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* TAB SYSTEM (Səhifələr) */
        .tab-content { display: none; flex-grow: 1; width: 100%; overflow-y: auto; padding-bottom: 80px; }
        .tab-content.active { display: flex; flex-direction: column; align-items: center; }

        /* HEADER */
        .header { margin-top: 15px; text-align: center; }
        .balance-container { text-align: center; margin: 20px 0; }
        .balance-text { font-size: 36px; font-weight: bold; color: #f0b90b; }

        /* MAIN GAME (HAMSTER) */
        .hamster-container { position: relative; width: 260px; height: 260px; margin: 20px auto; display: flex; justify-content: center; align-items: center; }
        .hamster-btn { width: 100%; height: 100%; border-radius: 50%; background: radial-gradient(#333, #000); border: 4px solid #f0b90b; box-shadow: 0 0 20px #f0b90b; cursor: pointer; transition: transform 0.1s; overflow: hidden; }
        .hamster-btn:active { transform: scale(0.95); }
        .hamster-img { width: 100%; height: 100%; object-fit: cover; pointer-events: none; }
        
        /* SHOP CARDS */
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 95%; margin-top: 10px; }
        .card { background: #1c1c1e; border-radius: 15px; padding: 15px; text-align: center; border: 1px solid #333; }
        .card h3 { font-size: 14px; margin: 5px 0; color: #fff; }
        .card p { font-size: 12px; color: #aaa; margin-bottom: 10px; }
        .price-btn { background: #f0b90b; color: black; border: none; padding: 8px 15px; border-radius: 8px; font-weight: bold; width: 100%; cursor: pointer; }
        .price-btn:active { transform: scale(0.95); }

        /* NAVBAR */
        .navbar { position: fixed; bottom: 0; width: 100%; background: #1c1c1e; padding: 15px 0; display: flex; justify-content: space-around; border-top: 1px solid #333; z-index: 100; }
        .nav-item { text-align: center; color: #666; font-size: 10px; cursor: pointer; }
        .nav-item.active { color: #f0b90b; }
        .nav-icon { font-size: 20px; margin-bottom: 5px; display: block; }

        /* FLOATING TEXT */
        .floating-text { position: absolute; color: white; font-size: 28px; font-weight: bold; pointer-events: none; animation: floatUp 0.8s ease-out forwards; z-index: 10; text-shadow: 0 0 5px black; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-100px); opacity: 0; } }

        /* ENERGY */
        .energy-bar { width: 90%; margin: 10px auto; display: flex; justify-content: space-between; font-size: 14px; font-weight: bold; }

    </style>
</head>
<body>

    <div id="tab-home" class="tab-content active">
        <div class="header"><h1>HAMSTER MINER</h1></div>
        
        <div class="balance-container">
            <div class="balance-text" id="display-score">0</div>
            <div style="font-size: 12px; color: #aaa;">Coins</div>
        </div>

        <div class="hamster-container">
            <div class="hamster-btn" onclick="tikla(event)">
                <img src="https://i.pinimg.com/originals/82/20/f7/8220f772439396d396032483d7395066.png" class="hamster-img">
            </div>
        </div>

        <div class="energy-bar">
            <span>⚡ <span id="energy">500</span>/500</span>
            <span id="level-display">Lvl 1</span>
        </div>
    </div>

    <div id="tab-withdraw" class="tab-content">
        <div class="header"><h1>PUL ÇIXARIŞI</h1></div>
        <div class="balance-container"><div class="balance-text" id="w-score">0</div></div>
        
        <div class="shop-grid">
            <div class="card">
                <h3>0.20 Qəpik</h3>
                <p>10,000 Coin</p>
                <button class="price-btn" onclick="buyItem('withdraw', 10000, '0.20 Qəpik')">AL</button>
            </div>
            <div class="card">
                <h3>0.50 Qəpik</h3>
                <p>25,000 Coin</p>
                <button class="price-btn" onclick="buyItem('withdraw', 25000, '0.50 Qəpik')">AL</button>
            </div>
            <div class="card">
                <h3>1.00 AZN</h3>
                <p>50,000 Coin</p>
                <button class="price-btn" onclick="buyItem('withdraw', 50000, '1 AZN')">AL</button>
            </div>
            <div class="card">
                <h3>10.00 AZN</h3>
                <p>1,500,000 Coin</p>
                <button class="price-btn" onclick="buyItem('withdraw', 1500000, '10 AZN')">AL</button>
            </div>
        </div>
    </div>

    <div id="tab-services" class="tab-content">
        <div class="header"><h1>TİKTOK PANEL</h1></div>
        <div class="balance-container"><div class="balance-text" id="s-score">0</div></div>

        <div class="shop-grid">
            <div class="card">
                <h3>1K Bəyənmə</h3>
                <p>2,000 Coin</p>
                <button class="price-btn" onclick="buyItem('tiktok', 2000, '1K Like')">SİFARİŞ ET</button>
            </div>
            <div class="card">
                <h3>3K Bəyənmə</h3>
                <p>4,000 Coin</p>
                <button class="price-btn" onclick="buyItem('tiktok', 4000, '3K Like')">SİFARİŞ ET</button>
            </div>
            <div class="card">
                <h3>5K Bəyənmə</h3>
                <p>8,000 Coin</p>
                <button class="price-btn" onclick="buyItem('tiktok', 8000, '5K Like')">SİFARİŞ ET</button>
            </div>
        </div>
    </div>

    <div class="navbar">
        <div class="nav-item active" onclick="switchTab('home', this)">
            <i class="fas fa-hammer nav-icon"></i> Mədən
        </div>
        <div class="nav-item" onclick="switchTab('withdraw', this)">
            <i class="fas fa-wallet nav-icon"></i> Çıxarış
        </div>
        <div class="nav-item" onclick="switchTab('services', this)">
            <i class="fas fa-hashtag nav-icon"></i> TikTok
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // DƏYİŞƏNLƏR (Yaddaşdan yüklənir)
        let balance = parseFloat(localStorage.getItem('balance')) || 0;
        let energy = parseInt(localStorage.getItem('energy')) || 500;
        let level = parseInt(localStorage.getItem('level')) || 1;
        let maxEnergy = 500;
        let earnPerTap = level; 

        // UI Yenilə
        function updateUI() {
            document.getElementById('display-score').innerText = Math.floor(balance);
            document.getElementById('w-score').innerText = Math.floor(balance);
            document.getElementById('s-score').innerText = Math.floor(balance);
            document.getElementById('energy').innerText = energy;
            document.getElementById('level-display').innerText = "Lvl " + level;
            
            // Yadda saxla
            localStorage.setItem('balance', balance);
            localStorage.setItem('energy', energy);
            localStorage.setItem('level', level);
        }

        // TIKLAMA
        function tikla(event) {
            if (energy <= 0) return;
            
            energy -= 1;
            balance += earnPerTap;
            
            // Level Sistemi (Hər 5000 xalda level artır)
            if (balance > level * 5000) {
                level++;
                earnPerTap++;
                alert(`Level Up! İndi Lvl ${level}`);
            }

            updateUI();

            // Animasiya
            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
            let floatText = document.createElement("div");
            floatText.className = "floating-text";
            floatText.innerText = "+" + earnPerTap;
            let x = event.clientX; let y = event.clientY;
            floatText.style.left = x + "px"; floatText.style.top = y + "px";
            document.body.appendChild(floatText);
            setTimeout(() => floatText.remove(), 800);
        }

        // ENERJİ BƏRPASI
        setInterval(() => {
            if (energy < maxEnergy) {
                energy++;
                updateUI();
            }
        }, 1000);

        // TAB DƏYİŞMƏK
        function switchTab(tabName, element) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById('tab-' + tabName).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
        }

        // ALIŞ-VERİŞ (Botla əlaqə)
        function buyItem(type, price, itemName) {
            if (balance < price) {
                tg.showAlert("❌ Balansınız kifayət etmir!");
                return;
            }

            // Balansdan çıxırıq
            balance -= price;
            updateUI();

            // Bota məlumat göndəririk
            let data = {
                action: type, // 'withdraw' və ya 'tiktok'
                amount: price,
                item: itemName
            };
            
            tg.sendData(JSON.stringify(data));
        }

        updateUI();
    </script>
</body>
</html>
